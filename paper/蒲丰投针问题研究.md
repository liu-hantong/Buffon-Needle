# 蒲丰投针问题研究

> 刘晗桐 171180526

## 摘要

本文简单介绍了蒲丰投针实验，使用Unity游戏引擎对实验进行了大数据模拟，并进行了结果的分析与总结

## 理论背景

以$$M$$表示针的中点，x表示M与最近的一条平行线的距离，$$\varphi$$表示投落针与平行线的夹角，以a表示两条平行线的距离，那么显然$$0 <x \le \frac{a}{2}  $$，为了使得投针可以与平行线相交，需要满足$$x\le sin\varphi \frac{l}{2}$$，满足这一关系式的区域记为$$D$$，阴影部分标记如下：

<img src="image/line.png" width = "300" height = "300" alt="图片名称" align=center /><img src="image/theory.jpg" width = "400" height = "300" alt="图片名称" align=center />

根据积分的几何意义，可以计算得出投针落在矩形区域的概率$$p$$：
$$
p = \frac{D的面积}{总落点的面积} = \frac{\int_ 0 ^\pi \frac{l}{2}sin\varphi dx}{\frac{1}{2}a\pi} = \frac{2l}{a\pi}
$$

## 编程测试

根据上述原理，使用`Unity`物理引擎在`Android`上搭建模拟投针平台，利用了Unity的**重力场模拟**以及**碰撞感应功能**，由于项目文件过大且多数为软件材质内容，综合考虑，可以通过以下两种方式进行体验：

* 直接下载安卓`apk`安装包后在安卓系统手机上安装运行，[点击下载](https://github.com/llht/Buffon-Needle/raw/master/release/%E8%92%B2%E4%B8%B0%E6%8A%95%E9%92%88.apk)
* 查看完整运行过程动图gif，[点击查看](<https://raw.githubusercontent.com/llht/Buffon-Needle/master/release/Demo.gif>)
* 进入[Github仓库地址](<https://github.com/llht/Buffon-Needle>)，`clone`项目到本地后利用Unity软件自行构建运行

> 运行演示结果 | 测试于HUAWEI NOVA2
>
> <img src="image/demo.png" width = "300" height = "520" alt="图片名称" align=center />

限定针的长度为$$l = 2500$$，平行线间距为$$a = 3000$$，满足$$l < a$$，限于`Unity`游戏引擎3D效果实现的屏幕刷新率限制，取投针次数从`10~1000000`，验证此方案的可行性，得到测试结果表格和图表见下：

| 投针次数 | 碰撞次数 | 估计的$$\pi$$值 |
| -------- | -------- | --------------- |
| 10       | 6        | 2.7778          |
| 100      | 64       | 2.6042          |
| 1000     | 538      | 3.0979          |
|          | 2678     | 3.1118          |
| 10000    | 10000    | 3.1264          |
| 30000    | 16033    | 3.1186          |
| 50000    | 26724    | 3.1183          |
| 100000   | 61529    | 3.1422          |
| 150000   | 79408    | 3.1483          |

## 结果分析

使用$$Matlab$$绘图，直观展示随着投针次数的增加，逼近$$\pi$$值的精度变化：

<img src="image/result.jpg" width = "450" height = "350" alt="图片名称" align=center />

可以看到，随着抛掷次数量级的上升，精度也在不断缩小，十万次以上的抛掷尝试可以得到圆周率$$\pi$$的小数点后两位$$3.14$$，相信更高量级的抛掷次数将会得到更加精确的结果，受限于计算机性能和时间的限制，不再做尝试。